package rustpress:plugin;

interface ai {
    record chat-message {
        role: string,
        content: string,
    }

    record chat-completion-request {
        model: option<string>,
        messages: list<chat-message>,
        max-tokens: option<s64>,
    }

    record chat-completion-choice {
        message: chat-message,
        finish-reason: string,
    }

    record chat-completion-usage {
        prompt-tokens: s64,
        completion-tokens: s64,
        total-tokens: s64,
    }

    record chat-completion-response {
        id: string,
        object: string,
        created: s64,
        model: string,
        choices: list<chat-completion-choice>,
        usage: chat-completion-usage,
    }

    chat-completion: func(request: chat-completion-request) -> result<chat-completion-response, string>;
    list-models: func() -> list<string>;
}