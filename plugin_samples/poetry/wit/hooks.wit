package rustpress:plugin;

interface event-handler {
    handle-filter: func(event: plugin-filter-event) -> result<plugin-filter-event, string>;
    handle-action: func(event: plugin-action-event);
    variant plugin-filter-event {
        on-post-published-filter(on-post-published-data),
        unknown
    }

    variant plugin-action-event {
        on-ai-token-used(on-ai-token-used-data),
        unknown
    }

    record on-post-published-data {
        title: string,
        content: string,
        category: option<string>,
        author-id: s64,
        description: option<string>,
    }

    record on-ai-token-used-data {
        plugin-id: string,
        model: string,
        prompt-tokens: s64,
        completion-tokens: s64,
        total-tokens: s64,
        operation: string,
        user-id: option<s64>,
    }

    record unknown {
        unknown: string,
    }
}

